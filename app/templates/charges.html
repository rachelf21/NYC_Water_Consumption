{% extends "base.html" %} {%block title%} NYC Water Cost: Charges {%endblock%} {% block content %}
<script src="/static/js/charges.js"></script>
<script>
  console.log(formatMoney(123.456));
</script>
<main id="main">
  <!-- ======= Light Blue Bar ======= -->
  <section class="breadcrumbs">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center">
        <h2>Charges</h2>
        <ol>
          <li><a href="index.html">Home</a></li>
          <li><a href="{{ url_for('list_dev', borough=0) }}">Developments</a></li>
          <li><a href="{{ url_for('list_dev', borough=borough_id) }}">{{borough_name}}</a></li>
          <li><a href="{{ url_for('buildings', id=dev_id) }}">Development: {{dev_name}}</a></li>
          <li>Building: {{bldg_name}}</li>
        </ol>
      </div>
    </div>
  </section>
  <!-- End Light Blue Bar -->

  <!-- ======= About Section ======= -->
  <section class="about" data-aos="fade-up">
    <div class="container">
      <div class="row">
        <div class="col-lg-4">
          <h3>Charges for {{bldg_name}}</h3>
          <span class="font-italic">Borough: {{borough_name}}</span><br />
          <span class="font-italic">Development: {{dev_name}}</span>

          <ul>
            <li><i class="icofont-check-circled"></i> I like this check.</li>
          </ul>
          <img src="/static/img/about.jpg" class="img-fluid" alt="" />
        </div>
        <div class="col-lg-8 pt-4 pt-lg-0">
          <p></p>
          <table
            id="myTable"
            class="table mx-auto table-hover table-striped table-bordered text-left w-auto table-fixed"
            style="border: 0px red solid; width: auto; margin: 0px auto"
          >
            <thead class="text-center">
              <th>Bill ID</th>
              <th>Building</th>
              <th>Meter</th>
              <th>Revenue Month</th>
              <th>Start</th>
              <th>End</th>
              <th>Charges</th>
              <th>Days</th>
            </thead>

            <tbody>
              {% for b in bills %}
              <tr>
                <td>{{b.bill_id }}</td>
                <td>{{b.building.location}}</td>
                <td>{{b.meter.meter_number}}</td>
                <td class="text-center">{{b.revenue_month}}</td>
                <td class="text-nowrap">{{b.service_start_date }}</td>
                <td class="text-nowrap">{{b.service_end_date }}</td>

                <td class="text-right">
                  <script>
                    document.write(formatMoney("{{b.current_charges }}"));
                  </script>
                </td>
                <td class="text-center">{{ b.days }}</td>
              </tr>
              {%endfor%}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
  <!-- End Developments Section -->

  <!-- ======= Facts Section ======= -->
  <section class="facts section-bg" data-aos="fade-up">
    <div class="container">
      <div class="row counters">
        <div class="col-lg-3 col-6 text-center">
          <span data-toggle="counter-up">107</span>
          <p>Developments</p>
        </div>

        <div class="col-lg-3 col-6 text-center">
          <span data-toggle="counter-up">523</span>
          <p>Buildings</p>
        </div>

        <div class="col-lg-3 col-6 text-center">
          <span data-toggle="counter-up">757</span>
          <p>Meters</p>
        </div>

        <div class="col-lg-3 col-6 text-center">
          <span data-toggle="counter-up">34,627</span>
          <p>Bills</p>
        </div>
      </div>
    </div>
  </section>
  <!-- End Facts Section -->

  <!-- ======= About Section ======= -->
  <section class="testimonials" data-aos="fade-up">
    <div class="container">
      <div class="section-title">
        <h2>About this Project</h2>
        <p>
          Monthly consumption and cost data by borough and development. Data set includes utility vendor and meter information. Data
          retrieved from NYC Open Data. Data provided by New York City Housing Authority (NYCHA)
        </p>
      </div>
    </div>
  </section>
  <!-- End About Section -->
</main>
<!-- End #main -->

<script>
  $("#myTable").DataTable({
    //pageLength: 20,
    paging: false,
    filter: true,
    deferRender: true,
    //scrollY: 1200,
    scrollCollapse: true,
    scroller: true,
    ordering: true,
    order: [3, "desc"],
    select: true,
    bSort: false,
  });
</script>
{% endblock content %}
